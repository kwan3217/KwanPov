<html>
<head>
<title>Building the UberPOV for Windows source</title>
<style type="text/css">
  body { background-color: #ffffee; }
  p { font-family: Helvetica, Arial, sans-serif ; margin-top: 0.5em ; margin-bottom: 0.3em; text-align: justify; padding-left: 10px; }
  pre { font-family: Lucida Console, Monaco, Courier, monospace ; padding-left: 10px; }
  code { color: #0000a0; font-size: 0.9em; }
  h1,h2,h3,h4,h5,h6 { font-family: Helvetica, Arial, sans-serif ; margin-top: 0.5em ; margin-bottom: 0.5em; color: #2040c0 }
  h2 { background: #c6d4df; color: black; text-align: center; font-size: 1.25em; color: #103080; border: 1px solid; }
  h3 { background: #d6e4ef; color: black; font-weight: bold; padding:0px 10px; }
  h4 { padding-left: 10px; }
  ul,ol,dl { font-family: Helvetica, Arial, sans-serif ; margin-top: 0.1em ; margin-bottom: 0.1em }
  .Highlighted { background: #ffff00; }
  .Main { width: 800px; }
  .Note { font-size: 0.8em; font-family: "Lucida Console,Lucida Sans Typewriter" ;color: #000000 ; background-color: #d6f4e0 ; border: 1px solid ; border-color: #cfdbe5 ; padding: 3pt; margin-top: 5px; margin-bottom: 5px; margin-left: 10px; text-align: justify; }
  .Quick { background-color: #d6f4e0 ; border: 1px solid ; border-color: #cfdbe5 ; padding: 3pt; margin-top: 5px; margin-bottom: 5px; margin-left: 10px; text-align: justify; }
  .Header { width: 800px; background: white; color: black; text-align: left; border: 1px solid; }
  .Header p { padding-right: 1em }
</style>
</head>
<body>

<div class="Header">
<p>
UberPOV Raytracer version 1.37.<br>
Portions Copyright 2013 Christoph Lipka.<br>
</p>

<p>
UberPOV 1.37 is an experimental unofficial branch of POV-Ray 3.7, and is
subject to the same licensing terms and conditions.
</p>
</div>
<br>
<div class="Header">
<p>
Persistence of Vision Ray Tracer ('POV-Ray') version 3.7.<br>
Copyright 1991-2013 Persistence of Vision Raytracer Pty. Ltd.
</p>

<p>
POV-Ray is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as
published by the Free Software Foundation, either version 3 of the
License, or (at your option) any later version.
</p>
 
<p>
POV-Ray is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License for more details.
</p>

<p>
You should have received a copy of the GNU Affero General Public License
along with this program.  If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>
</p>
</div>
<br>
<div class="Header">
<pre><code>$File: //depot/clipka/upov/windows/readme.html $
$Revision: #3 $
$Change: 6009 $
$DateTime: 2013/08/21 19:29:03 $
$Author: clipka $
</code></pre>
</div>

<div class="Main">

<h2>Building the UberPOV for Windows source</h2>


<h3>About this document</h3>

<p>
This document does not attempt to explain how UberPOV works or how to make 
modifications to it. Some of the internals of UberPOV are highly complex; if 
you wish to gain a better understanding of that topic, please follow the link 
provided on the source code page mentioned below. This document is intended 
only to assist you in getting the UberPOV source code built using an 
officially supported compiler on Win32 or Win64. Furthermore, no attempt is 
made to cover advanced subjects such as profile-guided optimization (though we 
will point out that the latter is definitely worthwhile, if you have the time 
and patience).
</p>

<h3>Assistance</h3>

<p>
Please use the POV-Ray unofficial patches support group at
<a href="http://news.povray.org/povray.unofficial.patches" target="new">http://news.povray.org/povray.unofficial.patches</a> or
<a href="news://news.povray.org/povray.unofficial.patches" target="new">news://news.povray.org/povray.unofficial.patches</a>. This group provides the best
means for support with relation to this subject.
</p>

<h2>Compilers</h2>

<h3>Visual Studio 2010 and 2012</h3>

<p>
Currently the only officially supported means of building the Windows version
of UberPOV is via the provided Visual Studio 2010 project (you can also use it
with VS 2012) with a full version of Visual Studio and the compilers provided
with it or with the platform SDK.
</p>
<p>
The Visual Studio 2010 project is located in the "windows/vs10" subdirectory.
</p>

<h3>Earlier Versions of Visual Studio</h3>

<p>
Note that versions of Visual Studio prior to 8.0 (VS 2005) are not supported at 
all and furthermore <b>will not work</b>. The code in UberPOV 1.37 requires a
reasonably up-to-date C++ compiler and STL, and earlier versions of VC++ are
not compatible. VS 2005 <i>may</i> work but as it is not used or tested against
we do not recommend it. VS2008 <i>should</i> work as it was used for a portion
of the development process of POV-Ray 3.7. In either case you will need to generate
suitable project files, which is not as simple as just dropping all the source
files into a new project and hitting F7. Please closely study the options applied
to each project in the VS2010 solution if you wish to try to backport the projects.
</p>

<h3>Visual Studio Express</h3>

<p>
The express editions have been reported to work in building 32-bit executables
but this is not officially supported, and additionally takes some effort to get
set up. It is recommended to first try building POV-Ray 3.7, of which UberPOV
1.37 is an unofficial branch; a source distribution package of POV-Ray for
Windows can be obtained from <a href=http://www.povray.org target="new">http://www.povray.org</a>; once you are successful in
building POV-Ray, it should be easy to adapt your build process to UberPOV.
</p>
<h3>Other Compilers</h3>

<p>
In order to build UberPOV with any other compiler, it is recommended to first
try building POV-Ray 3.7, of which UberPOV 1.37 is an unofficial branch;
a source distribution package of POV-Ray for Windows can be obtained from
<a href=http://www.povray.org target="new">http://www.povray.org</a>; once you are successful in building POV-Ray, it should
be easy to adapt your build process to UberPOV.
</p>

</p>

<h2>Build Steps</h2>

<ol>
<li>
<p>
Make sure you have a working copy of the appropriate release binary
installed. This ensures that the appropriate registry settings and
support files are present. If you don't do this, your compiled code will
probably not work on your machine.
</p>
</li>

<a name="build">
<li>
<p>
Open <code>windows\vs10\povray.sln</code> in Visual Studio 2010/2012. Set 'Windows
Targets &gt; GUI' as the start-up project if it is not already selected.
Then,  select the 'Generic POV-Ray &gt; povbackend' project and expand
'Backend Headers', then open the file <code>'povray.h'</code> listed within it. Please
set <code>DISTRIBUTION_MESSAGE_2</code> to your real name to make
unofficial versions distinguishable from each other. Remove the <code>#error</code>
directive afterwards to proceed with the build. Note that if you do not 
do this you will get compile errors.
</p>

<p>
By default, the GUI project is built, and the Console project is excluded. If you
wish to generate a simple console version of UberPOV, please modify the configuration
as needed, edit vfe\win\syspovconfig.h to enable the definition of _CONSOLE as noted
therein, and build.
</p>

<p class="note">
<b>Note:</b> The windows console project is intended to be a simple example of
how to use the VFE library to make a console version of UberPOV with <i>minimal code</i>.
It is <b><i>not</i></b> intended to be a fully-featured console build of UberPOV. If
you wish to make a more comprehensive console version that runs on windows, please
use the unix version as a guide - it uses the same principles (as it is also linked
with VFE) but has more features.
</p>
</li>

<li>
<p>
Once you have taken whatever steps are needed as set out above, select
your  desired build (e.g. Win32 release - anything except SSE2|x64), hit
F7, and wait. We recommend that you read the rest of this document while
you are waiting.
</p>

<p>
If all goes well, you should end up with the UberPOV for Windows
executable. All 32-bit  binaries should end up in <code>windows\vs10\bin32</code>, and
the 64-bit ones should be in <code>windows\vs10\bin64</code>.
</p>

<p>
Note: if you are building a DEBUG version of UberPOV, be aware that the 
executable will attempt to load the debug version of POV-Ray's editor
DLLs. In this case, if you want the editor to be available in the GUI,
copy the standard editor DLLs that come with the official POV-Ray 3.7
distribution to their debug equivalent names (e.g. copy <code>cmedit32.dll</code> to
<code>cmedit32d.dll</code>, etc).
</p>

<p>
Note that the copied <code>cmedit32.dll</code> will still attempt to load
<code>povcmax32.dll</code> (i.e. the non-debug version), so it's not necessary to
copy <code>povcmax32.dll</code> to its debug equivalent. The same goes for
<code>povcmax64.dll</code>.
</p>
</li>
</ol>

<p>
NB you should never attempt to build the 'x64 SSE2' configuration (if it
is present): apart from  the fact that this is by default excluded from
the build in the configuration  manager, it simply won't work. The only
reason it is there at all is that Visual Studio insists on cloning the
Win32 SSE2 project every time it updates the solution file, no matter how 
hard we try to get rid of it. SSE2 is always enabled for x64 targets (it
can't be turned off as it's a standard feature of all x64 CPU's) and thus
the x64 release project is all that is needed.
</p>

</div>
</body>
</html>
